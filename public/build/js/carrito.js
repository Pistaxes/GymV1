function iniciarApp(){consultarApi(),pagar()}async function consultarApi(){try{const e=localStorage.getItem("carrito");mostrarServicios(null===e?[]:JSON.parse(e))}catch(e){console.log(e)}}function mostrarServicios(e){e.forEach((e,t)=>{const{id:n,nombre:o,precio:r,imagen:a}=e,c=document.createElement("h3");c.classList.add("nombre-producto"),c.textContent=o;const d=document.createElement("p");d.classList.add("precio-producto"),d.textContent=r,d.id="precio";const i=a,s=document.createElement("img");s.src=`../build/img/${i}.jpg`;const l=document.createElement("DIV");l.classList.add("producto"),l.dataset.idProducto=n;document.createElement("DIV").classList.add("botones");const u=document.createElement("INPUT");u.placeholder="Cantidad",u.type="number",u.classList.add("cantidad"),u.value=1,u.id="cantidad";const m=document.createElement("button");m.textContent="Eliminar",m.classList.add("boton"),m.addEventListener("click",()=>{Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(e=>{if(e.isConfirmed){var n=JSON.parse(localStorage.getItem("carrito"));n.splice(t,1),localStorage.setItem("carrito",JSON.stringify(n)),document.querySelector("#productos").innerHTML="",consultarApi(),Swal.fire({title:"Deleted!",text:"Your file has been deleted.",icon:"success"})}})});document.createElement("P").textContent=r,costo=u,l.appendChild(c),l.appendChild(s),l.appendChild(d),l.appendChild(u),l.appendChild(m),document.querySelector("#productos").appendChild(l)});const t=document.createElement("button");t.textContent="Resumen",t.classList.add("boton"),t.addEventListener("click",()=>{var e=document.querySelectorAll(".cantidad"),t=document.querySelectorAll(".precio-producto");if(e.length===t.length){for(var n=0,o=0;o<e.length;o++){var r=parseFloat(t[o].innerText),a=parseFloat(e[o].value);if(isNaN(a)||isNaN(r))return void console.log("Uno o ambos valores no son números válidos.");n+=a*r}comprarProductos(n)}else console.log("La cantidad de elementos no coincide.")}),document.querySelector("#productos").appendChild(t)}function comprarProductos(e){const t=document.createElement("H1");t.textContent="Tu total a pagar es de: ";const n=document.createElement("H2");n.classList.add("precio-Final"),n.textContent=e;const o=document.createElement("BUTTON");o.classList.add("boton"),o.textContent="Comprar con Stripe";document.getElementById("monto").value=e,t.appendChild(n),t.appendChild(o),document.querySelector("#productos").appendChild(t)}function pagar(){var e=Stripe("pk_test_51OKXdZG1jX1oNbL4usgBwI4qDOmG8mrhJuzWoJ482vbbnw476aGJDUOSQIpmamFrMjkL6KrYrPqBRAljL4xBkGWU004rOEojgO"),t=e.elements().create("card",{style:{base:{fontSize:"16px",fontFamily:'"Helvetica Neue", Helvetica, sans-serif'}}});t.mount("#card-element"),t.addEventListener("change",(function(e){var t=document.getElementById("card-errors");e.error?t.textContent=e.error.message:t.textContent=""}));var n=document.getElementById("payment-form");n.addEventListener("submit",(function(o){o.preventDefault(),e.createToken(t).then((function(e){if(e.error){document.getElementById("card-errors").textContent=e.error.message}else{var t=document.createElement("input");t.setAttribute("type","hidden"),t.setAttribute("name","stripeToken"),t.setAttribute("value",e.token.id),n.appendChild(t),n.submit()}}))}))}document.addEventListener("DOMContentLoaded",(function(){iniciarApp()}));