function iniciarApp(){consultarApi(),pagar()}async function consultarApi(){try{const t="/api/carrito",e=await fetch(t),n=await e.json();console.log(n),mostrarServicios(n)}catch(t){console.log(t)}}function mostrarServicios(t){t.forEach((t,e)=>{const{id:n,producto:o,cantidad:a,precio:c,imagen:r,usuario:i,total:d}=t,s=document.createElement("h3");s.classList.add("nombre-producto"),s.textContent=o;const l=document.createElement("p");l.classList.add("precio-producto"),l.textContent="PrecioUnitario: "+c;const u=r,m=document.createElement("img");m.src=`../build/img/${u}.jpg`;const p=document.createElement("p");p.classList.add("cantidad"),p.textContent="Cantidad: "+a;const C=document.createElement("p");C.classList.add("total"),C.textContent="Total: "+d;const f=document.createElement("DIV");f.classList.add("producto");document.createElement("DIV").classList.add("botones");const E=document.createElement("button");E.textContent="Eliminar",E.classList.add("boton-eliminar"),E.dataset.id=n,E.addEventListener("click",async()=>{if(await AlertConfirm({title:"Quieres eliminar este producto?"})){const t=await fetch("/api/carrito/eliminar?id="+n,{method:"POST"});if(t.ok){const e=await t.json();console.log(e);document.querySelector("#productos").innerHTML="",consultarApi()}}});document.createElement("P").textContent=c,f.appendChild(s),f.appendChild(m),f.appendChild(l),f.appendChild(p),f.appendChild(C),f.appendChild(E),document.querySelector("#productos").appendChild(f)});const e=document.createElement("button");e.textContent="Resumen",e.classList.add("boton"),e.addEventListener("click",()=>{const e=[];t.forEach(t=>{e.push(Number(t.total))}),comprarProductos(e.reduce((t,e)=>t+e,0))}),document.querySelector("#productos").appendChild(e)}document.addEventListener("DOMContentLoaded",(function(){iniciarApp()}));const AlertConfirm=({icon:t="warning",title:e,text:n})=>Swal.fire({title:e,text:n,icon:t,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",customClass:{popup:"border-radius-2"}}).then(t=>!!t.isConfirmed);function comprarProductos(t){const e=document.createElement("H1");e.textContent="Tu total a pagar es de: ";const n=document.createElement("H2");n.classList.add("precio-Final"),n.textContent=t;document.getElementById("monto").value=t,e.appendChild(n),document.querySelector("#productos").appendChild(e)}function pagar(){var t=Stripe("pk_test_51OKXdZG1jX1oNbL4usgBwI4qDOmG8mrhJuzWoJ482vbbnw476aGJDUOSQIpmamFrMjkL6KrYrPqBRAljL4xBkGWU004rOEojgO"),e=t.elements().create("card",{style:{base:{fontSize:"16px",fontFamily:'"Helvetica Neue", Helvetica, sans-serif'}}});e.mount("#card-element"),e.addEventListener("change",(function(t){var e=document.getElementById("card-errors");t.error?e.textContent=t.error.message:e.textContent=""}));var n=document.getElementById("payment-form");n.addEventListener("submit",(function(o){o.preventDefault(),t.createToken(e).then((function(t){if(t.error){document.getElementById("card-errors").textContent=t.error.message}else{var e=document.createElement("input");e.setAttribute("type","hidden"),e.setAttribute("name","stripeToken"),e.setAttribute("value",t.token.id),n.appendChild(e),n.submit()}}))}))}