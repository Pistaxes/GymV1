function iniciarApp(){consultarApi(),pagar()}async function consultarApi(){try{const e="/api/carrito",t=await fetch(e),n=await t.json();console.log(n),mostrarServicios(n)}catch(e){console.log(e)}}function mostrarServicios(e){e.forEach((e,t)=>{const{producto:n,cantidad:o,precio:r,imagen:c,usuario:a,total:d}=e,i=document.createElement("h3");i.classList.add("nombre-producto"),i.textContent=n;const s=document.createElement("p");s.classList.add("precio-producto"),s.textContent=r;const l=c,u=document.createElement("img");u.src=`../build/img/${l}.jpg`;const m=document.createElement("p");m.classList.add("cantidad"),m.textContent=o;const p=document.createElement("p");p.classList.add("total"),p.textContent=d;const C=document.createElement("DIV");C.classList.add("producto");document.createElement("DIV").classList.add("botones");const f=document.createElement("button");f.textContent="Eliminar",f.classList.add("boton"),f.addEventListener("click",()=>{Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(e=>{if(e.isConfirmed){var n=JSON.parse(localStorage.getItem("carrito"));n.splice(t,1),localStorage.setItem("carrito",JSON.stringify(n)),document.querySelector("#productos").innerHTML="",consultarApi(),Swal.fire({title:"Deleted!",text:"Your file has been deleted.",icon:"success"})}})});document.createElement("P").textContent=r,C.appendChild(i),C.appendChild(u),C.appendChild(s),C.appendChild(m),C.appendChild(p),C.appendChild(f),document.querySelector("#productos").appendChild(C)});const t=document.createElement("button");t.textContent="Resumen",t.classList.add("boton"),t.addEventListener("click",()=>{const t=[];e.forEach(e=>{t.push(Number(e.total))}),comprarProductos(t.reduce((e,t)=>e+t,0))}),document.querySelector("#productos").appendChild(t)}function comprarProductos(e){const t=document.createElement("H1");t.textContent="Tu total a pagar es de: ";const n=document.createElement("H2");n.classList.add("precio-Final"),n.textContent=e;document.getElementById("monto").value=e,t.appendChild(n),document.querySelector("#productos").appendChild(t)}function pagar(){var e=Stripe("pk_test_51OKXdZG1jX1oNbL4usgBwI4qDOmG8mrhJuzWoJ482vbbnw476aGJDUOSQIpmamFrMjkL6KrYrPqBRAljL4xBkGWU004rOEojgO"),t=e.elements().create("card",{style:{base:{fontSize:"16px",fontFamily:'"Helvetica Neue", Helvetica, sans-serif'}}});t.mount("#card-element"),t.addEventListener("change",(function(e){var t=document.getElementById("card-errors");e.error?t.textContent=e.error.message:t.textContent=""}));var n=document.getElementById("payment-form");n.addEventListener("submit",(function(o){o.preventDefault(),e.createToken(t).then((function(e){if(e.error){document.getElementById("card-errors").textContent=e.error.message}else{var t=document.createElement("input");t.setAttribute("type","hidden"),t.setAttribute("name","stripeToken"),t.setAttribute("value",e.token.id),n.appendChild(t),n.submit()}}))}))}document.addEventListener("DOMContentLoaded",(function(){iniciarApp()}));